{"version":3,"sources":["webpack:///./src/views/editarticle.vue?c6f4","webpack:///src/views/editarticle.vue","webpack:///./src/views/editarticle.vue?2abe","webpack:///./src/views/editarticle.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","nativeOn","$event","preventDefault","model","value","article","callback","$$v","$set","expression","_l","item","key","_id","name","on","handleImageAdded","edit","_v","cancel","staticRenderFns","data","methods","$router","push","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,UAAU,CAACE,MAAM,CAAC,cAAc,QAAQC,SAAS,CAAC,OAAS,SAASC,GAAQA,EAAOC,oBAAqB,CAACL,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,OAAO,KAAO,WAAW,CAACF,EAAG,YAAY,CAACE,MAAM,CAAC,SAAW,IAAII,MAAM,CAACC,MAAOX,EAAIY,QAAkB,WAAEC,SAAS,SAAUC,GAAMd,EAAIe,KAAKf,EAAIY,QAAS,aAAcE,IAAME,WAAW,uBAAuBhB,EAAIiB,GAAIjB,EAAc,YAAE,SAASkB,GAAM,OAAOd,EAAG,YAAY,CAACe,IAAID,EAAKE,IAAId,MAAM,CAAC,MAAQY,EAAKG,KAAK,MAAQH,EAAKE,UAAS,IAAI,GAAGhB,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,SAAS,CAACF,EAAG,WAAW,CAACM,MAAM,CAACC,MAAOX,EAAIY,QAAa,MAAEC,SAAS,SAAUC,GAAMd,EAAIe,KAAKf,EAAIY,QAAS,QAASE,IAAME,WAAW,oBAAoB,GAAGZ,EAAG,SAAS,CAACA,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,KAAK,CAACF,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,SAAS,CAACF,EAAG,aAAa,CAACE,MAAM,CAAC,sBAAwB,IAAIgB,GAAG,CAAC,cAActB,EAAIuB,kBAAkBb,MAAM,CAACC,MAAOX,EAAIY,QAAc,OAAEC,SAAS,SAAUC,GAAMd,EAAIe,KAAKf,EAAIY,QAAS,SAAUE,IAAME,WAAW,qBAAqB,IAAI,IAAI,GAAGZ,EAAG,eAAe,CAACA,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,UAAU,KAAO,UAAU,cAAc,UAAUgB,GAAG,CAAC,MAAQtB,EAAIwB,OAAO,CAACxB,EAAIyB,GAAG,UAAUrB,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,OAAO,KAAO,WAAWgB,GAAG,CAAC,MAAQtB,EAAI0B,SAAS,CAAC1B,EAAIyB,GAAG,SAAS,IAAI,IACtyCE,EAAkB,G,oCCmCtB,GACE,WAAF,CACI,UAAJ,QAEAC,KAJA,WAKA,OACA,WACA,gBAGAC,QAAA,CACA,iBADA,SACA,kLACA,eACA,mBAFA,SAGA,yBAHA,OAGA,EAHA,OAIA,SACA,eACA,2BACA,IAPA,8CASI,WAVJ,WAUA,uKACA,qBADA,SAEA,8CAFA,OAEA,EAFA,OAGA,eACA,iBAJA,8CAMI,KAhBJ,WAgBA,wKACA,oEADA,OAEA,iCACA,YACA,eACA,gBACA,eANA,8CASI,cAzBJ,WAyBA,8KACA,qCADA,OACA,EADA,OAEA,oBAFA,8CAIIH,OA7BJ,WA8BMzB,KAAK6B,QAAQC,KAAK,oBAGxB,QA3CA,WA2CA,wKACA,eADA,uBAEA,kBAFA,+CC/EqV,I,YCOjVC,EAAY,eACd,EACAjC,EACA4B,GACA,EACA,KACA,KACA,MAIa,aAAAK,E","file":"js/chunk-2d0e9365.bbae47b1.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-form',{attrs:{\"label-width\":\"auto\"},nativeOn:{\"submit\":function($event){$event.preventDefault();}}},[_c('el-form-item',{attrs:{\"label\":\"所属分类\",\"size\":\"normal\"}},[_c('el-select',{attrs:{\"multiple\":\"\"},model:{value:(_vm.article.categories),callback:function ($$v) {_vm.$set(_vm.article, \"categories\", $$v)},expression:\"article.categories\"}},_vm._l((_vm.categories),function(item){return _c('el-option',{key:item._id,attrs:{\"label\":item.name,\"value\":item._id}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"文章标题\"}},[_c('el-input',{model:{value:(_vm.article.title),callback:function ($$v) {_vm.$set(_vm.article, \"title\", $$v)},expression:\"article.title\"}})],1),_c('el-row',[_c('el-col',{attrs:{\"span\":24}},[_c('el-form-item',{attrs:{\"label\":\"文章内容\"}},[_c('vue-editor',{attrs:{\"useCustomImageHandler\":\"\"},on:{\"image-added\":_vm.handleImageAdded},model:{value:(_vm.article.detail),callback:function ($$v) {_vm.$set(_vm.article, \"detail\", $$v)},expression:\"article.detail\"}})],1)],1)],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"default\",\"native-type\":\"submit\"},on:{\"click\":_vm.edit}},[_vm._v(\"确认修改\")]),_c('el-button',{attrs:{\"type\":\"info\",\"size\":\"default\"},on:{\"click\":_vm.cancel}},[_vm._v(\"取消\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-form @submit.native.prevent label-width=\"auto\">\r\n      <el-form-item label=\"所属分类\" size=\"normal\">\r\n          <!-- \r\n              option里的:key为了vue优化\r\n              :label表示页面上显示啥\r\n              :value表示每个option所代表的真正的值\r\n             select后面的v-model则是把真正的值(:value)与article.categories双向绑定\r\n           -->\r\n          <el-select v-model=\"article.categories\" multiple>\r\n              <el-option v-for=\"item in categories\"\r\n                  :key=\"item._id\" \r\n                  :label=\"item.name\"\r\n                  :value=\"item._id\">\r\n              </el-option>\r\n          </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"文章标题\" >\r\n          <el-input v-model=\"article.title\"></el-input>\r\n      </el-form-item>\r\n      <el-row>\r\n        <el-col :span=\"24\">\r\n<el-form-item label=\"文章内容\">\r\n          <vue-editor useCustomImageHandler @image-added=\"handleImageAdded\" v-model=\"article.detail\"></vue-editor>\r\n      </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n       <el-form-item>\r\n        <el-button type=\"primary\" size=\"default\"  native-type=\"submit\" @click=\"edit\">确认修改</el-button>\r\n        <el-button type=\"info\" size=\"default\"  @click=\"cancel\">取消</el-button>\r\n         </el-form-item>\r\n  </el-form>\r\n</template>\r\n\r\n<script>\r\n import { VueEditor } from 'vue2-editor'\r\nexport default {\r\n    components: {\r\n        VueEditor\r\n    },\r\ndata() {\r\n  return {\r\n    article:{},\r\n    categories:[],\r\n  }\r\n},\r\nmethods: {\r\n  async handleImageAdded(file, Editor, cursorLocation, resetUploader){//vue2editor官网的传输形式，用formdata传输，并且把返回的图片的url嵌入文章中，文章就是一个html格式的字符串，点击确认修改后这个字符串保存在数据库中，而url存在字符串里。\r\n     let formdata = new FormData()\r\n     formdata.append('file',file)\r\n     let res = await this.$http.post('upload',formdata)\r\n     let url = res.data\r\n     console.log(url);\r\n     Editor.insertEmbed(cursorLocation, \"image\", url);\r\n     resetUploader();\r\n  },\r\n    async getarticle(){//根据route中的id请求对应的数据\r\n        let id = this.$route.params.id\r\n        let res = await this.$http.get(`/rest/articles/edit/${id}`)\r\n        console.log(res);\r\n        this.article = res.data\r\n    },\r\n    async edit(){//发送修改数据的put请求\r\n        await this.$http.put(`/rest/articles/edit/${this.article._id}`,this.article)\r\n        this.$router.push('/articles/list')\r\n        this.$message({\r\n      type:'success',\r\n      message:'修改成功~',\r\n      duration:600\r\n    })\r\n    },\r\n    async getcategories(){\r\n        let cats = await this.$http.get('/rest/categories/list')\r\n        this.categories = cats.data\r\n    },\r\n    cancel(){\r\n      this.$router.push('/articles/list')  \r\n    }\r\n},\r\nasync created() {\r\n    await this.getarticle()\r\n    await this.getcategories()\r\n},\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./editarticle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./editarticle.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./editarticle.vue?vue&type=template&id=933c3e2e&\"\nimport script from \"./editarticle.vue?vue&type=script&lang=js&\"\nexport * from \"./editarticle.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}