{"version":3,"sources":["webpack:///./src/views/newarticle.vue?4305","webpack:///src/views/newarticle.vue","webpack:///./src/views/newarticle.vue?748d","webpack:///./src/views/newarticle.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","nativeOn","$event","preventDefault","model","value","article","callback","$$v","$set","expression","_l","item","key","_id","name","on","handleImageAdded","save","_v","cancel","staticRenderFns","components","data","methods","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,UAAU,CAACE,MAAM,CAAC,cAAc,QAAQC,SAAS,CAAC,OAAS,SAASC,GAAQA,EAAOC,oBAAqB,CAACL,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,OAAO,KAAO,WAAW,CAACF,EAAG,YAAY,CAACM,MAAM,CAACC,MAAOX,EAAIY,QAAkB,WAAEC,SAAS,SAAUC,GAAMd,EAAIe,KAAKf,EAAIY,QAAS,aAAcE,IAAME,WAAW,uBAAuBhB,EAAIiB,GAAIjB,EAAc,YAAE,SAASkB,GAAM,OAAOd,EAAG,YAAY,CAACe,IAAID,EAAKE,IAAId,MAAM,CAAC,MAAQY,EAAKG,KAAK,MAAQH,EAAKE,UAAS,IAAI,GAAGhB,EAAG,SAAS,CAACA,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,IAAI,CAACF,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,SAAS,CAACF,EAAG,WAAW,CAACM,MAAM,CAACC,MAAOX,EAAIY,QAAa,MAAEC,SAAS,SAAUC,GAAMd,EAAIe,KAAKf,EAAIY,QAAS,QAASE,IAAME,WAAW,oBAAoB,IAAI,IAAI,GAAGZ,EAAG,SAAS,CAACA,EAAG,SAAS,CAACA,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,SAAS,CAACF,EAAG,aAAa,CAACE,MAAM,CAAC,sBAAwB,IAAIgB,GAAG,CAAC,cAActB,EAAIuB,kBAAkBb,MAAM,CAACC,MAAOX,EAAIY,QAAc,OAAEC,SAAS,SAAUC,GAAMd,EAAIe,KAAKf,EAAIY,QAAS,SAAUE,IAAME,WAAW,qBAAqB,IAAI,IAAI,GAAGZ,EAAG,eAAe,CAACA,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,UAAU,KAAO,UAAU,cAAc,UAAUgB,GAAG,CAAC,MAAQtB,EAAIwB,OAAO,CAACxB,EAAIyB,GAAG,QAAQrB,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,OAAO,KAAO,WAAWgB,GAAG,CAAC,MAAQtB,EAAI0B,SAAS,CAAC1B,EAAIyB,GAAG,SAAS,IAAI,IAC/yCE,EAAkB,G,oCCiCtB,GACEC,WAAY,CACV,UAAJ,QAEAC,KAJA,WAKA,OACA,WACA,gBAGAC,QAAA,CACI,iBADJ,SACA,kLACA,eACA,mBAFA,SAGA,yBAHA,OAGA,EAHA,OAIA,SACA,eACA,2BACA,IAPA,8CASA,KAVA,WAUA,8KACA,6CADA,OACA,EADA,OAEA,eACA,iCACA,YACA,eACA,gBACA,eAPA,8CAUA,WApBA,WAoBA,8KACA,qCADA,OACA,EADA,OAEA,oBAFA,8CAKA,OAzBA,WA0BA,sCAGA,QAvCA,WAuCA,wKACA,eADA,+CCzEoV,I,YCOhVC,EAAY,eACd,EACAhC,EACA4B,GACA,EACA,KACA,KACA,MAIa,aAAAI,E","file":"js/chunk-2d0c432e.a3cd9a28.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-form',{attrs:{\"label-width\":\"auto\"},nativeOn:{\"submit\":function($event){$event.preventDefault();}}},[_c('el-form-item',{attrs:{\"label\":\"所属分类\",\"size\":\"normal\"}},[_c('el-select',{model:{value:(_vm.article.categories),callback:function ($$v) {_vm.$set(_vm.article, \"categories\", $$v)},expression:\"article.categories\"}},_vm._l((_vm.categories),function(item){return _c('el-option',{key:item._id,attrs:{\"label\":item.name,\"value\":item._id}})}),1)],1),_c('el-row',[_c('el-col',{attrs:{\"span\":8}},[_c('el-form-item',{attrs:{\"label\":\"文章标题\"}},[_c('el-input',{model:{value:(_vm.article.title),callback:function ($$v) {_vm.$set(_vm.article, \"title\", $$v)},expression:\"article.title\"}})],1)],1)],1),_c('el-row',[_c('el-col',[_c('el-form-item',{attrs:{\"label\":\"文章内容\"}},[_c('vue-editor',{attrs:{\"useCustomImageHandler\":\"\"},on:{\"image-added\":_vm.handleImageAdded},model:{value:(_vm.article.detail),callback:function ($$v) {_vm.$set(_vm.article, \"detail\", $$v)},expression:\"article.detail\"}})],1)],1)],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"default\",\"native-type\":\"submit\"},on:{\"click\":_vm.save}},[_vm._v(\"新建\")]),_c('el-button',{attrs:{\"type\":\"info\",\"size\":\"default\"},on:{\"click\":_vm.cancel}},[_vm._v(\"取消\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-form @submit.native.prevent label-width=\"auto\">\r\n     <el-form-item label=\"所属分类\" size=\"normal\">\r\n          <el-select v-model=\"article.categories\">\r\n              <el-option v-for=\"item in categories\"\r\n                  :key=\"item._id\"\r\n                  :label=\"item.name\"\r\n                  :value=\"item._id\">\r\n              </el-option>\r\n          </el-select>\r\n      </el-form-item>\r\n      <el-row>\r\n        <el-col :span=\"8\">\r\n<el-form-item label=\"文章标题\" >\r\n          <el-input v-model=\"article.title\"></el-input>\r\n      </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n      <el-row>\r\n        <el-col>\r\n<el-form-item label=\"文章内容\">\r\n          <vue-editor useCustomImageHandler @image-added=\"handleImageAdded\" v-model=\"article.detail\"></vue-editor>\r\n      </el-form-item>\r\n        </el-col>\r\n      </el-row>\r\n       <el-form-item>\r\n        <el-button type=\"primary\" size=\"default\"  native-type=\"submit\" @click=\"save\">新建</el-button>\r\n        <el-button type=\"info\" size=\"default\"   @click=\"cancel\">取消</el-button>\r\n         </el-form-item>\r\n  </el-form>\r\n</template>\r\n\r\n<script>\r\n import { VueEditor } from 'vue2-editor'\r\nexport default {\r\n  components: {\r\n        VueEditor\r\n    },\r\ndata() {\r\n  return {\r\n    article:{},\r\n    categories:[]\r\n  }\r\n},\r\nmethods: {\r\n    async handleImageAdded(file, Editor, cursorLocation, resetUploader){//vue2editor官网的传输形式，用formdata传输，并且把返回的图片的url嵌入文章中，文章就是一个html格式的字符串，点击确认修改后这个字符串保存在数据库中，而url存在字符串里。\r\n     let formdata = new FormData()\r\n     formdata.append('file',file)\r\n     let res = await this.$http.post('upload',formdata)\r\n     let url = res.data\r\n     console.log(url);\r\n     Editor.insertEmbed(cursorLocation, \"image\", url);\r\n     resetUploader();\r\n  },\r\n  async save(){//存储文章\r\n    let res = await this.$http.post('/rest/articles/new',this.article)\r\n    console.log(res);\r\n    this.$router.push('/articles/list')\r\n    this.$message({\r\n      type:'success',\r\n      message:'新建成功~',\r\n      duration:600\r\n    })\r\n  },\r\n  async getparents(){//获取所有分类\r\nlet parents = await this.$http.get('/rest/categories/list')\r\nthis.categories = parents.data\r\n\r\n  },\r\n  cancel(){\r\n    this.$router.push('/articles/list')\r\n  }\r\n},\r\nasync created() {\r\n  await this.getparents()\r\n},\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./newarticle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./newarticle.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./newarticle.vue?vue&type=template&id=127c25c5&\"\nimport script from \"./newarticle.vue?vue&type=script&lang=js&\"\nexport * from \"./newarticle.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}